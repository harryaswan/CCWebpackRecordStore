{"version":3,"sources":["webpack:///webpack/bootstrap 8c807e6147cf32853f3e","webpack:///./src/app.js","webpack:///./src/record_store/store.js","webpack:///./src/record_store/inventory.js","webpack:///./src/record_store/record.js","webpack:///./src/record_store/collector.js","webpack:///./src/record_store/recordstoreview.js","webpack:///./src/sample.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,sCAAsC;AAC7D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAuB,0CAA0C;AACjE;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC/DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA,iBAAgB;AAChB;AACA;;AAEA;;;;;;;ACvCA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,iBAAiB;AACxC;AACA;AACA,oCAAmC,oBAAoB;AACvD;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;;;AAGA,MAAK;AACL;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA,MAAK;AACL;AACA,wBAAuB,uBAAuB;AAC9C;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA,wBAAuB,uBAAuB;AAC9C;AACA;AACA,MAAK;AACL;AACA;AACA,wBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACPA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;;;;;;;AC1BA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAS;;;AAGT,MAAK;AACL;AACA;AACA;AACA;;AAEA,wBAAuB,sCAAsC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;;AAEA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACrNA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 8c807e6147cf32853f3e\n **/","var Store = require(\"./record_store/store.js\");\nvar Collector = require(\"./record_store/collector.js\");\nvar RecordStoreView = require(\"./record_store/recordstoreview.js\");\nvar sample = require(\"./sample.js\");\n\nvar main = function() {\n    var store = null;\n    var collector = null;\n\n    var savedStore = localStorage.getItem(\"store\");\n    var savedCollector = localStorage.getItem(\"collector\");\n\n    if (savedStore && savedCollector) {\n        var storeBits = JSON.parse(savedStore);\n        var storeName = storeBits.name;\n        var storeCity = storeBits.city;\n        var storeBalance = storeBits.balance;\n        var storeInventory = [];\n        for (var i = 0; i < storeBits.inventory.items.length; i++) {\n            storeInventory.push(storeBits.inventory.items[i]);\n        }\n        store = new Store(storeName, storeCity, storeInventory, storeBalance);\n        console.log(store);\n\n        var collectorBits = JSON.parse(savedCollector);\n        var collectorName = collectorBits.name;\n        var collectorBalance = collectorBits.balance;\n        var collectorInventory = [];\n        for (var i = 0; i < collectorBits.inventory.items.length; i++) {\n            collectorInventory.push(collectorBits.inventory.items[i]);\n        }\n        collector = new Collector(collectorName, collectorInventory, collectorBalance);\n        console.log(collector);\n    } else {\n        store = new Store(\"Colin's Music\", \"Glasgow\", null, 20);\n        collector = new Collector(\"Jimmy\", null, 10);\n        populatePeeps(store, collector);\n    }\n\n    var rsv = new RecordStoreView(document.getElementById('record_store'), store, collector);\n\n\n    rsv.render();\n\n    document.getElementById('save_button').onclick = function(e) {\n        e.preventDefault();\n\n        localStorage.setItem(\"store\", JSON.stringify(store));\n        localStorage.setItem(\"collector\", JSON.stringify(collector));\n\n    };\n\n\n\n};\n\nvar populatePeeps = function(store, collector) {\n    store.addRecord(sample[0]);\n    store.addRecord(sample[1]);\n    collector.addRecord(sample[2]);\n    collector.addRecord(sample[3]);\n};\n\nwindow.onload = main;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app.js\n ** module id = 0\n ** module chunks = 0\n **/","var Inventory = require('./inventory');\n\nvar Store = function(name, city, startingInventory, startingBalance) {\n    this.name = name;\n    this.city = city;\n    this.inventory = new Inventory();\n    this.balance = startingBalance;\n    if (startingInventory) {\n        this.addRecord(startingInventory);\n    }\n};\n\nStore.prototype = {\n    addRecord: function() {\n        this.inventory.addItem(arguments);\n    },\n    stockLevels: function() {\n        return this.inventory.length();\n    },\n    listInventory: function() {\n        this.inventory.list();\n    },\n    findRecord: function(name) {\n        return this.inventory.findItem(name);\n    },\n    sellRecord: function(record) {\n        return this.inventory.sell(this, record);\n    },\n    buyRecord: function(record, seller) {\n        this.inventory.buy(this, seller, record);\n    },\n    inventoryValue: function() {\n        return this.inventory.value();\n    },\n    report: function() {\n        return {cash: this.balance, stock: this.inventoryValue()};\n    }\n};\n\nmodule.exports = Store;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/record_store/store.js\n ** module id = 1\n ** module chunks = 0\n **/","var Record = require('./record');\n\nvar Inventory = function() {\n    this.items = [];\n};\n\nInventory.prototype = {\n    addItem: function() {\n        var args = arguments[0];\n        for (var i = 0; i < args.length; i++) {\n            if (args[i]) {\n                if (args[i] instanceof Array) {\n                    for (var a = 0; a < args[i].length; a++) {\n                        this.items.push(args[i][a]);\n                    }\n                } else {\n                    this.items.push(args[i]);\n                }\n            }\n        }\n\n\n    },\n    removeItem: function() {\n        for (var i = 0; i < arguments.length; i++) {\n            this.items.splice(this.items.indexOf(arguments[i]), 1);\n        }\n    },\n    findItem: function(val) {\n        for (var i = 0; i < this.items.length; i++) {\n            if (this.items[i].title === val) {\n                return this.items[i];\n            } else if (this.items[i].barcode === parseInt(val)) {\n                return this.items[i];\n            }\n        }\n    },\n    buy: function(buyer, seller, item) {\n        var r = seller.inventory.checkIfItem(item);\n        if (r) {\n            if (buyer.balance >= r.price) {\n                var ra = seller.sellRecord(r);\n\n                if (ra) {\n                    buyer.addRecord(ra);\n                    buyer.balance -= r.price;\n                }\n            }\n        }\n    },\n    sell: function(seller, item) {\n        var r = seller.inventory.checkIfItem(item);\n        if (r instanceof Record) {\n            seller.balance += r.price;\n            return this.items.splice(this.items.indexOf(r), 1)[0];\n        } else {\n            return false;\n        }\n    },\n    checkIfItem: function(item) {\n        var r = item;\n        if (!(item instanceof Record)) {\n            r = this.findItem(item);\n        }\n        return r;\n    },\n    length: function() {\n        return this.items.length;\n    },\n    list: function() {\n        for (var i = 0; i < this.items.length; i++) {\n            console.log(\"#\" + i, this.items[i]);\n        }\n    },\n    value: function() {\n        var val = 0;\n        for (var i = 0; i < this.items.length; i++) {\n            val += this.items[i].price;\n        }\n        return val;\n    }\n};\n\nmodule.exports = Inventory;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/record_store/inventory.js\n ** module id = 2\n ** module chunks = 0\n **/","var Record = function(name, title, price, barcode) {\n    this.name = name;\n    this.title = title;\n    this.price = parseInt(price);\n    this.barcode = parseInt(barcode);\n};\n\nmodule.exports = Record;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/record_store/record.js\n ** module id = 3\n ** module chunks = 0\n **/","var Inventory = require('./inventory');\n\nvar Collector = function(name, startingInventory, startingBalance) {\n    this.name = name;\n    this.balance = startingBalance;\n    this.inventory = new Inventory();\n    if (startingInventory) {\n        this.addRecord(startingInventory);\n    }\n};\n\nCollector.prototype = {\n    addRecord: function() {\n        this.inventory.addItem(arguments);\n    },\n    findRecord: function(name) {\n        return this.inventory.findItem('title', name);\n    },\n    buyRecord: function(record_title, store) {\n        this.inventory.buy(this, store, record_title);\n    },\n    sellRecord: function(record) {\n        return this.inventory.sell(this, record);\n    }\n};\n\nmodule.exports = Collector;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/record_store/collector.js\n ** module id = 4\n ** module chunks = 0\n **/","var Record = require('./record.js');\nvar RecordStoreView = function(container, store, collector) {\n    this.container = container;\n    this.store = store;\n    this.collector = collector;\n\n\n    this.create();\n};\n\nRecordStoreView.prototype = {\n    render: function() {\n        this.displayInfo('store');\n        this.displayInfo('collector');\n        this.displayInventory('store');\n        this.displayInventory('collector');\n    },\n    displayInfo: function(who) {\n        var balanceEl = document.getElementById(who+'-balance');\n        var t = who;\n        t = t[0].toUpperCase() + t.substring(1);\n        balanceEl.innerHTML = t + \" Balance £\" + Math.round(this[who].balance * 100) / 100;\n        balanceEl.innerHTML += \" - <i>Value £\"+Math.round(this[who].inventory.value() * 100) / 100+\"</i>\";\n\n        var infoEl = document.getElementById(who + '-info');\n\n        infoEl.innerHTML = \"Name:\";\n        infoEl.innerHTML += \"<b id='collector-name' contenteditable='true'>\"+ this[who].name +\"</b>\";\n        infoEl.childNodes[1].onkeydown = function(e) {\n            this[who].name = e.target.innerText;\n        }.bind(this);\n\n\n    },\n    displayInventory: function(who) {\n        var ulName = who + \"-inventory\";\n        var dispCont = document.getElementById(ulName);\n        this.clearElement(dispCont);\n\n        for (var i = 0; i < this[who].inventory.items.length; i++) {\n            var li = document.createElement('li');\n            li.setAttribute('barcode', this[who].inventory.items[i].barcode);\n            li.setAttribute('seller', who);\n            li.setAttribute('draggable', true);\n            li.ondragstart = function(e) {\n                e.dataTransfer.setData(\"barcode\", e.target.getAttribute(\"barcode\"));\n                e.dataTransfer.setData(\"seller\", e.target.getAttribute(\"seller\"));\n            };\n            li.innerHTML = \"<i>\" + this[who].inventory.items[i].name + \"</i> - <b>\" + this[who].inventory.items[i].title + \"</b> - £\" + this[who].inventory.items[i].price;\n\n            var btn = document.createElement('button');\n            btn.setAttribute('seller', who);\n            btn.innerText = \"Sell\";\n            btn.onclick = function(e) {\n                var t = e.target.parentNode.getAttribute('barcode');\n                var seller = null, collector = null;\n                if (e.target.getAttribute('seller') === \"store\") {\n                    seller = this.store;\n                    buyer = this.collector;\n                } else {\n                    seller = this.collector;\n                    buyer = this.store;\n                }\n                buyer.buyRecord(t, seller);\n                this.render();\n            }.bind(this);\n\n            li.appendChild(btn);\n\n            dispCont.appendChild(li);\n        }\n    },\n    create:function() {\n        var elements = [];\n\n        // elements.push(this.createElement('button', 'addInterest', 'Add Interest'));\n        // elements.push(this.createElement('button', 'reset', 'Reset'));\n        //\n        // elements[0].onclick = function() {\n        //     this.addInterest();\n        // }.bind(this);\n        // elements[1].onclick = function() {\n        //     console.log(\"RESET....\");\n        // };\n\n        var section1 = this.createElement('div', 'storeContainer', this.createElement('h4', 'store-balance', null));\n        section1.appendChild(this.createElement('h3', 'store-info', null));\n        section1.appendChild(this.createElement('ul', 'store-inventory', null));\n\n        var t = section1.childNodes[2];\n        t.ondragenter = function(e) {\n            e.preventDefault();\n        };\n        t.ondragover = function(e) {\n            e.preventDefault();\n        };\n        t.ondrop = function(e) {\n            this.onDropFunction(e);\n        }.bind(this);\n        elements.push(section1);\n\n        var section2 = this.createElement('div', 'collectorContainer', this.createElement('h4', 'collector-balance', null));\n        section2.appendChild(this.createElement('h3', 'collector-info', null));\n        section2.appendChild(this.createElement('ul', 'collector-inventory', null));\n\n        t = section2.childNodes[2];\n        t.ondragenter = function(e) {\n            e.preventDefault();\n        };\n        t.ondragover = function(e) {\n            e.preventDefault();\n        };\n        t.ondrop = function(e) {\n            this.onDropFunction(e);\n        }.bind(this);\n\n        elements.push(section2);\n\n        /* form inputs */\n        var form = this.createElement('form', 'record-form', null);\n\n        var nameIn = this.createElement('input', 'record-form-name', null);\n        nameIn.setAttribute('type', 'text');\n        nameIn.setAttribute('placeholder', 'Artist Name');\n        var nameLabel = document.createElement('label');\n        nameLabel.innerText = \"Name:\";\n\n        var titleIn = this.createElement('input', 'record-form-title', null);\n        titleIn.setAttribute('type', 'text');\n        titleIn.setAttribute('placeholder', 'Album Name');\n        var titleLabel = document.createElement('label');\n        titleLabel.innerText = \"Title:\";\n\n        var priceIn = this.createElement('input', 'record-form-price', null);\n        priceIn.setAttribute('type', 'number');\n        priceIn.setAttribute('placeholder', '5.99');\n        var priceLabel = document.createElement('label');\n        priceLabel.innerText = \"Price: £\";\n\n        var barcodeIn = this.createElement('input', 'record-form-barcode', null);\n        barcodeIn.setAttribute('type', 'number');\n        barcodeIn.setAttribute('placeholder', 'xxxxxxxx');\n        var barcodeLabel = document.createElement('label');\n        barcodeLabel.innerText = \"Barcode:\";\n\n        var goBtn = this.createElement('button', 'saveRecord', 'Save');\n        goBtn.onclick = function(e) {\n            e.preventDefault();\n            var name = document.getElementById('record-form-name');\n            var title = document.getElementById('record-form-title');\n            var price = document.getElementById('record-form-price');\n            var barcode = document.getElementById('record-form-barcode');\n            if (name && title && price && barcode) {\n                this.store.addRecord(new Record(name.value, title.value, parseInt(price.value), parseInt(barcode.value)));\n                name.value = null;\n                title.value = null;\n                price.value = null;\n                barcode.value = null;\n                this.render();\n            } else {\n                console.log(\"input missing\");\n            }\n        }.bind(this);\n\n        form.appendChild(nameLabel);\n        form.appendChild(nameIn);\n        form.appendChild(titleLabel);\n        form.appendChild(titleIn);\n        form.appendChild(priceLabel);\n        form.appendChild(priceIn);\n        form.appendChild(barcodeLabel);\n        form.appendChild(barcodeIn);\n        form.appendChild(goBtn);\n        /* end of form inputs */\n        elements.push(form);\n        for (var i = 0; i < elements.length; i++) {\n            this.container.appendChild(elements[i]);\n        }\n\n    },\n    clearElement: function(element) {\n        while (element.firstChild) {\n            element.removeChild(element.firstChild);\n        }\n    },\n    createElement:function(type, id, inner) {\n        var tmp = document.createElement(type);\n        tmp.setAttribute('id', id);\n        if (inner instanceof Node) {\n            tmp.appendChild(inner);\n        } else {\n            tmp.innerHTML = inner;\n        }\n        return tmp;\n    },\n    onDropFunction: function(e) {\n        e.preventDefault();\n        var barcode = e.dataTransfer.getData(\"barcode\");\n        var sellerText = e.dataTransfer.getData(\"seller\");\n        var seller = null, collector = null;\n        if (sellerText === \"store\") {\n            seller = this.store;\n            buyer = this.collector;\n        } else {\n            seller = this.collector;\n            buyer = this.store;\n        }\n        buyer.buyRecord(parseInt(barcode), seller);\n        this.render();\n        return false;\n    }\n};\n\nmodule.exports = RecordStoreView;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/record_store/recordstoreview.js\n ** module id = 5\n ** module chunks = 0\n **/","var Record = require('./record_store/record.js');\n\nvar records = [];\n\nrecords.push(new Record('Elbow', 'Seldom Seen Kid', 9.99, 11111111));\nrecords.push(new Record('Train', 'Bulletproof Picasso', 3.99, 22222222));\nrecords.push(new Record('AC/DC', 'Black Ice', 4.05, 33333333));\nrecords.push(new Record('Vandaveer', 'Oh, Willie, Please...', 3, 44444444));\n\n\nmodule.exports = records;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/sample.js\n ** module id = 6\n ** module chunks = 0\n **/"],"sourceRoot":""}